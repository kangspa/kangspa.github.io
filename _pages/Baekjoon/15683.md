---
title: "감시"
tags:
    - 1 초
    - 512 MB
    - 45.797%
date: "2025-08-28"
---

출처 : [감시](https://www.acmicpc.net/problem/15683)
<details>
<summary><b>Solution</b></summary>

<details>
<summary>Python</summary>

<pre><code class='language-python'>
import sys
input = sys.stdin.readline

from collections import deque
import copy

def checkVisible(board, y, x, dy, dx, N, M):
    while True:
        ny, nx = y+dy, x+dx
        # 다음이 체크 가능한 구역이라면, 7로 설정하고 y,x값 갱신
        if (0<=ny<N) & (0<=nx<M):
            if board[ny][nx]!=6:
                board[ny][nx] = 7
                y, x = ny, nx
            # 더이상 체크 불가능한 구역이라면 현재 보드를 반환
            else: return board
        else: return board

if __name__ == '__main__':
    N, M = map(int, input().split())
    CCTVS = [] # CCTV 좌표와 종류 저장
    office = [] # 현재 사무실 형태 저장
    for y in range(N):
        # 한 줄씩 입력받기
        row = list(map(int, input().split()))
        # x좌표 값과 해당 타일이 뭔지 입력받고,
        for x,c in enumerate(row):
            # 타일이 1~5 사이의 값, 즉 CCTV면 해당 좌표와 값을 넣는다.
            if c in range(1, 6): CCTVS.append((y,x,c))
        # 사무실에 입력받은 열을 넣어준다.
        office.append(row)
    # CCTV 별로 볼 수 있는 방향을 저장 (상,하,좌,우)
    one = [(1,0,0,0),(0,1,0,0),(0,0,1,0),(0,0,0,1)]
    two = [(1,1,0,0),(0,0,1,1)]
    three = [(1,0,0,1),(0,1,0,1),(0,1,1,0),(1,0,1,0)]
    four = [(0,1,1,1),(1,0,1,1),(1,1,0,1),(1,1,1,0)]
    five = [(1,1,1,1)]
    # cctv 방향을 전부 저장
    dirCCTV = [(), one, two, three, four, five]
    
    answer = N*M
    # CCTV가 감시가능한 구역 전부 Q에 넣는다.
    Q = deque()
    Q.append(office)
    
    for cctv in CCTVS:
        y,x,c = cctv # cctv의 좌표값과 종류
        new = deque() # 새로운 큐를 생성
        # 현재 체크해야하는 보드들
        while Q:
            board = Q.popleft()
            # 현재 cctv가 감시 가능한 방향을 7로 바꿔주는 함수에 넣는다
            for u,d,l,r in dirCCTV[c]:
                # 방향 체크하는게 전부 겹치면 안되니깐, 매번 새로운 보드를 만든다.
                nBoard = copy.deepcopy(board)
                if u: nBoard = checkVisible(nBoard, y, x, -1, 0, N, M)
                if d: nBoard = checkVisible(nBoard, y, x, 1, 0, N, M)
                if l: nBoard = checkVisible(nBoard, y, x, 0, -1, N, M)
                if r: nBoard = checkVisible(nBoard, y, x, 0, 1, N, M)
                # new 큐에 새로 만들어진 사무실을 넣어준다.
                new.append(nBoard)
        # Q가 new 큐를 가르키도록 설정해준다.(이미 Q는 비어있음)
        Q = new
    
    # Q에 남은건 전부 체크완료된 사무실뿐
    while Q:
        office = Q.popleft()
        blind = 0
        # 현재 사무실에서 사각지대는 blind에 넣기
        for row in office:
            for tile in row:
                if not tile: blind += 1
        # answer과 현재 사무실 중 사각지대 더 적은걸 넣기
        answer = min(answer, blind)
    print(answer)
</code></pre>
</details>

</details>

<hr>

<div class="col-md-12">
<section class="problem-section" id="description">
<div class="headline">
<h2>문제</h2>
</div>
<div class="problem-text" id="problem_description">
<p>스타트링크의 사무실은 1×1크기의 정사각형으로 나누어져 있는 N×M 크기의 직사각형으로 나타낼 수 있다. 사무실에는 총 K개의 CCTV가 설치되어져 있는데, CCTV는 5가지 종류가 있다. 각 CCTV가 감시할 수 있는 방법은 다음과 같다.</p>
<table class="table table table-bordered" style="width: 100%;">
<tbody>
<tr>
<td style="width: 20%; text-align: center; vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/1.png" style="width: 113px; height: 70px;"/></td>
<td style="width: 20%; text-align: center;vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/2.png" style="width: 156px; height: 70px;"/></td>
<td style="width: 20%; text-align: center;vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/3.png" style="width: 100px; height: 100px;"/></td>
<td style="width: 20%; text-align: center;vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/4.png" style="width: 138px; height: 100px;"/></td>
<td style="width: 20%; text-align: center;vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/5.png" style="width: 149px; height: 150px;"/></td>
</tr>
<tr>
<td style="width: 20%; text-align: center;">1번</td>
<td style="width: 20%; text-align: center;">2번</td>
<td style="width: 20%; text-align: center;">3번</td>
<td style="width: 20%; text-align: center;">4번</td>
<td style="width: 20%; text-align: center;">5번</td>
</tr>
</tbody>
</table>
<p>1번 CCTV는 한 쪽 방향만 감시할 수 있다. 2번과 3번은 두 방향을 감시할 수 있는데, 2번은 감시하는 방향이 서로 반대방향이어야 하고, 3번은 직각 방향이어야 한다. 4번은 세 방향, 5번은 네 방향을 감시할 수 있다.</p>
<p>CCTV는 감시할 수 있는 방향에 있는 칸 전체를 감시할 수 있다. 사무실에는 벽이 있는데, CCTV는 벽을 통과할 수 없다. CCTV가 감시할 수 없는 영역은 사각지대라고 한다.</p>
<p>CCTV는 회전시킬 수 있는데, 회전은 항상 90도 방향으로 해야 하며, 감시하려고 하는 방향이 가로 또는 세로 방향이어야 한다.</p>
<pre>
0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 0 6 0
0 0 0 0 0 0</pre>
<p>지도에서 0은 빈 칸, 6은 벽, 1~5는 CCTV의 번호이다. 위의 예시에서 1번의 방향에 따라 감시할 수 있는 영역을 '<code>#</code>'로 나타내면 아래와 같다.</p>
<table class="table table table-bordered" style="width: 100%;">
<tbody>
<tr>
<td style="width: 25%; text-align: center;">
<pre>
0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 # 6 0
0 0 0 0 0 0</pre>
</td>
<td style="width: 25%; text-align: center;">
<pre>
0 0 0 0 0 0
0 0 0 0 0 0
# # 1 0 6 0
0 0 0 0 0 0</pre>
</td>
<td style="width: 25%; text-align: center;">
<pre>
0 0 # 0 0 0
0 0 # 0 0 0
0 0 1 0 6 0
0 0 0 0 0 0</pre>
</td>
<td style="width: 25%; text-align: center;">
<pre>
0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 0 6 0
0 0 # 0 0 0</pre>
</td>
</tr>
<tr>
<td style="width: 25%; text-align: center;">→</td>
<td style="width: 25%; text-align: center;">←</td>
<td style="width: 25%; text-align: center;">↑</td>
<td style="width: 25%; text-align: center;">↓</td>
</tr>
</tbody>
</table>
<p>CCTV는 벽을 통과할 수 없기 때문에, 1번이 → 방향을 감시하고 있을 때는 6의 오른쪽에 있는 칸을 감시할 수 없다.</p>
<pre>
0 0 0 0 0 0
0 2 0 0 0 0
0 0 0 0 6 0
0 6 0 0 2 0
0 0 0 0 0 0
0 0 0 0 0 5</pre>
<p>위의 예시에서 감시할 수 있는 방향을 알아보면 아래와 같다.</p>
<table class="table table table-bordered" style="width: 100%;">
<tbody>
<tr>
<td style="width: 25%; text-align: center;">
<pre>
0 0 0 0 0 #
# 2 # # # #
0 0 0 0 6 #
0 6 # # 2 #
0 0 0 0 0 #
# # # # # 5</pre>
</td>
<td style="width: 25%; text-align: center;">
<pre>
0 0 0 0 0 #
# 2 # # # #
0 0 0 0 6 #
0 6 0 0 2 #
0 0 0 0 # #
# # # # # 5</pre>
</td>
<td style="width: 25%; text-align: center;">
<pre>
0 # 0 0 0 #
0 2 0 0 0 #
0 # 0 0 6 #
0 6 # # 2 #
0 0 0 0 0 #
# # # # # 5</pre>
</td>
<td style="width: 25%; text-align: center;">
<pre>
0 # 0 0 0 #
0 2 0 0 0 #
0 # 0 0 6 #
0 6 0 0 2 #
0 0 0 0 # #
# # # # # 5</pre>
</td>
</tr>
<tr>
<td style="width: 25%; text-align: center;">왼쪽 상단 2: ↔, 오른쪽 하단 2: ↔</td>
<td style="width: 25%; text-align: center;">왼쪽 상단 2: ↔, 오른쪽 하단 2: ↕</td>
<td style="width: 25%; text-align: center;">왼쪽 상단 2: ↕, 오른쪽 하단 2: ↔</td>
<td style="width: 25%; text-align: center;">왼쪽 상단 2: ↕, 오른쪽 하단 2: ↕</td>
</tr>
</tbody>
</table>
<p>CCTV는 CCTV를 통과할 수 있다. 아래 예시를 보자.</p>
<pre>
0 0 2 0 3
0 6 0 0 0
0 0 6 6 0
0 0 0 0 0
</pre>
<p>위와 같은 경우에 2의 방향이 ↕ 3의 방향이 ←와 ↓인 경우 감시받는 영역은 다음과 같다.</p>
<pre>
# # 2 # 3
0 6 # 0 #
0 0 6 6 #
0 0 0 0 #
</pre>
<p>사무실의 크기와 상태, 그리고 CCTV의 정보가 주어졌을 때, CCTV의 방향을 적절히 정해서, 사각 지대의 최소 크기를 구하는 프로그램을 작성하시오.</p>
</div>
</section>
</div>
<div class="col-md-12">
<section class="problem-section" id="input">
<div class="headline">
<h2>입력</h2>
</div>
<div class="problem-text" id="problem_input">
<p>첫째 줄에 사무실의 세로 크기 N과 가로 크기 M이 주어진다. (1 ≤ N, M ≤ 8)</p>
<p>둘째 줄부터 N개의 줄에는 사무실 각 칸의 정보가 주어진다. 0은 빈 칸, 6은 벽, 1~5는 CCTV를 나타내고, 문제에서 설명한 CCTV의 종류이다. </p>
<p>CCTV의 최대 개수는 8개를 넘지 않는다.</p>
</div>
</section>
</div>
<div class="col-md-12">
<section class="problem-section" id="output">
<div class="headline">
<h2>출력</h2>
</div>
<div class="problem-text" id="problem_output">
<p>첫째 줄에 사각 지대의 최소 크기를 출력한다.</p>
</div>
</section>
</div>
<div class="col-md-12">
<section class="problem-section" id="limit" style="display:none;">
<div class="headline">
<h2>제한</h2>
</div>
<div class="problem-text" id="problem_limit">
</div>
</section>
</div>
<div class="col-md-12">
<div class="row">
<div class="col-md-6">
<section id="sampleinput1">
<div class="headline">
<h2>예제 입력 1
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-input-1" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-input-1">4 6
0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 0 6 0
0 0 0 0 0 0
</pre>
</section>
</div>
<div class="col-md-6">
<section id="sampleoutput1">
<div class="headline">
<h2>예제 출력 1
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-output-1" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-output-1">20
</pre>
</section>
</div>
</div>
</div>
<div class="col-md-12">
<div class="row">
<div class="col-md-6">
<section id="sampleinput2">
<div class="headline">
<h2>예제 입력 2
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-input-2" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-input-2">6 6
0 0 0 0 0 0
0 2 0 0 0 0
0 0 0 0 6 0
0 6 0 0 2 0
0 0 0 0 0 0
0 0 0 0 0 5
</pre>
</section>
</div>
<div class="col-md-6">
<section id="sampleoutput2">
<div class="headline">
<h2>예제 출력 2
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-output-2" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-output-2">15
</pre>
</section>
</div>
</div>
</div>
<div class="col-md-12">
<div class="row">
<div class="col-md-6">
<section id="sampleinput3">
<div class="headline">
<h2>예제 입력 3
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-input-3" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-input-3">6 6
1 0 0 0 0 0
0 1 0 0 0 0
0 0 1 0 0 0
0 0 0 1 0 0
0 0 0 0 1 0
0 0 0 0 0 1
</pre>
</section>
</div>
<div class="col-md-6">
<section id="sampleoutput3">
<div class="headline">
<h2>예제 출력 3
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-output-3" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-output-3">6
</pre>
</section>
</div>
</div>
</div>
<div class="col-md-12">
<div class="row">
<div class="col-md-6">
<section id="sampleinput4">
<div class="headline">
<h2>예제 입력 4
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-input-4" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-input-4">6 6
1 0 0 0 0 0
0 1 0 0 0 0
0 0 1 5 0 0
0 0 5 1 0 0
0 0 0 0 1 0
0 0 0 0 0 1
</pre>
</section>
</div>
<div class="col-md-6">
<section id="sampleoutput4">
<div class="headline">
<h2>예제 출력 4
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-output-4" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-output-4">2
</pre>
</section>
</div>
</div>
</div>
<div class="col-md-12">
<div class="row">
<div class="col-md-6">
<section id="sampleinput5">
<div class="headline">
<h2>예제 입력 5
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-input-5" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-input-5">1 7
0 1 2 3 4 5 6
</pre>
</section>
</div>
<div class="col-md-6">
<section id="sampleoutput5">
<div class="headline">
<h2>예제 출력 5
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-output-5" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-output-5">0
</pre>
</section>
</div>
</div>
</div>
<div class="col-md-12">
<div class="row">
<div class="col-md-6">
<section id="sampleinput6">
<div class="headline">
<h2>예제 입력 6
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-input-6" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-input-6">3 7
4 0 0 0 0 0 0
0 0 0 2 0 0 0
0 0 0 0 0 0 4
</pre>
</section>
</div>
<div class="col-md-6">
<section id="sampleoutput6">
<div class="headline">
<h2>예제 출력 6
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-output-6" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-output-6">0
</pre>
</section>
</div>
</div>
</div>
<div class="col-md-12">
<section class="problem-section" id="hint" style="display: none;">
<div class="headline">
<h2>힌트</h2>
</div>
<div class="problem-text" id="problem_hint">
</div>
</section>
</div>

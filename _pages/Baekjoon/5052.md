---
title: "전화번호 목록"
tags:
    - 1 초
    - 256 MB
    - 32.116%
date: "2025-08-29"
---

출처 : [전화번호 목록](https://www.acmicpc.net/problem/5052)
<details>
<summary><b>Solution</b></summary>

<details>
<summary>Python</summary>

<pre><code class='language-python'>
import sys
input = sys.stdin.readline

# 트라이 구조 활용
class Node(object):
    def __init__(self, key, data=None):
        self.key = key
        self.data = data
        self.child = {}
        
class Trie(object):
    def __init__(self):
        self.head = Node(None)
        
    def insert(self, lst):
        # 현재 노드 위치 가리키는 now
        now = self.head
        # 문자 하나씩 key로 잡고, 노드를 만들어서 내려감
        for c in lst:
            if c not in now.child:
                now.child[c] = Node(c)
            now = now.child[c]
        # lst의 모든 문자를 key로 해서 노드가 만들어졌으면, 마지막 노드에 data 추가
        now.data = lst
        
    def search(self, lst):
        # 현재 노드 위치 가리키는 now
        now = self.head
        # 만들어둔 트라이 구조에서 lst를 끝까지 검색
        for c in lst:
            now = now.child[c]
        # 검색 결과 하위 노드가 있다면(접두어라면) False
        if now.child: return False
        # 없다면 True
        else: return True

if __name__ == '__main__':
    t = int(input())
    for _ in range(t):
        n = int(input())
        # 예제 1번 보면 공백은 없애는게 맞음
        phone = [input().strip().replace(' ', '') for _ in range(n)]
        
        # 각 TC에 대해 트라이 구조 생성
        trie = Trie()
        # 각 번호들을 트라이 구조에 입력
        for lst in phone: trie.insert(lst)
        # 유효한 목록인지 체크할 변수 flag
        flag = True
        # 각 번호를 검색하며, 한번이라도 유효하지 않으면 False로 변환
        for lst in phone:
            if not trie.search(lst):
                flag = False
                break
        # 유효하면 YES, 유효하지 않으면 NO
        if flag: print('YES')
        else: print('NO')

'''
# sort하면 사전순 우선 정렬 후 길이 짧은 것부터 정렬되는 특성 활용
def valid(lst):
    # 이미 정렬됐으니까, 목록에서 i-1이 i의 접두어인지만 확인하면 됨.
    for i in range(1, len(lst)):
        # 목록에서 앞 번호 길이가 뒷 번호 길이 이상이라면, 접두어가 아니니 패스
        n, m = len(lst[i-1]), len(lst[i])
        if n >= m: continue
        # i에서 n까지의 번호가 i-1의 접두어인지 체크
        if lst[i-1]==lst[i][:n]: return False
    return True

if __name__ == '__main__':
    t = int(input())
    for _ in range(t):
        n = int(input())
        # 예제 1번 보면 공백은 없애는게 맞음
        phone = [input().strip().replace(' ', '') for _ in range(n)]
        # 우선 정렬
        phone.sort()
        # 유효한 목록이면, YES / 아니면 NO
        if valid(phone): print('YES')
        else: print('NO')
'''
</code></pre>
</details>

</details>

<hr>

<div class="col-md-12">
<section class="problem-section" id="description">
<div class="headline">
<h2>문제</h2>
</div>
<div class="problem-text" id="problem_description">
<p>전화번호 목록이 주어진다. 이때, 이 목록이 일관성이 있는지 없는지를 구하는 프로그램을 작성하시오.</p>
<p>전화번호 목록이 일관성을 유지하려면, 한 번호가 다른 번호의 접두어인 경우가 없어야 한다.</p>
<p>예를 들어, 전화번호 목록이 아래와 같은 경우를 생각해보자</p>
<ul>
<li>긴급전화: 911</li>
<li>상근: 97 625 999</li>
<li>선영: 91 12 54 26</li>
</ul>
<p>이 경우에 선영이에게 전화를 걸 수 있는 방법이 없다. 전화기를 들고 선영이 번호의 처음 세 자리를 누르는 순간 바로 긴급전화가 걸리기 때문이다. 따라서, 이 목록은 일관성이 없는 목록이다. </p>
</div>
</section>
</div>
<div class="col-md-12">
<section class="problem-section" id="input">
<div class="headline">
<h2>입력</h2>
</div>
<div class="problem-text" id="problem_input">
<p>첫째 줄에 테스트 케이스의 개수 t가 주어진다. (1 ≤ t ≤ 50) 각 테스트 케이스의 첫째 줄에는 전화번호의 수 n이 주어진다. (1 ≤ n ≤ 10000) 다음 n개의 줄에는 목록에 포함되어 있는 전화번호가 하나씩 주어진다. 전화번호의 길이는 길어야 10자리이며, 목록에 있는 두 전화번호가 같은 경우는 없다.</p>
</div>
</section>
</div>
<div class="col-md-12">
<section class="problem-section" id="output">
<div class="headline">
<h2>출력</h2>
</div>
<div class="problem-text" id="problem_output">
<p>각 테스트 케이스에 대해서, 일관성 있는 목록인 경우에는 YES, 아닌 경우에는 NO를 출력한다.</p>
</div>
</section>
</div>
<div class="col-md-12">
<section class="problem-section" id="limit" style="display:none;">
<div class="headline">
<h2>제한</h2>
</div>
<div class="problem-text" id="problem_limit">
</div>
</section>
</div>
<div class="col-md-12">
<div class="row">
<div class="col-md-6">
<section id="sampleinput1">
<div class="headline">
<h2>예제 입력 1
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-input-1" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-input-1">2
3
911
97625999
91125426
5
113
12340
123440
12345
98346
</pre>
</section>
</div>
<div class="col-md-6">
<section id="sampleoutput1">
<div class="headline">
<h2>예제 출력 1
							<button class="btn btn-link copy-button" data-clipboard-target="#sample-output-1" style="padding: 0px;" type="button">복사</button>
</h2>
</div>
<pre class="sampledata" id="sample-output-1">NO
YES
</pre>
</section>
</div>
</div>
</div>
<div class="col-md-12">
<section class="problem-section" id="hint" style="display: none;">
<div class="headline">
<h2>힌트</h2>
</div>
<div class="problem-text" id="problem_hint">
</div>
</section>
</div>
<div style="display: none;">
<div id="problem-lang-base64">W3sicHJvYmxlbV9pZCI6IjUwNTIiLCJwcm9ibGVtX2xhbmciOiIwIiwidGl0bGUiOiJcdWM4MDRcdWQ2NTRcdWJjODhcdWQ2MzggXHViYWE5XHViODVkIiwiZGVzY3JpcHRpb24iOiI8cD5cdWM4MDRcdWQ2NTRcdWJjODhcdWQ2MzggXHViYWE5XHViODVkXHVjNzc0IFx1YzhmY1x1YzViNFx1YzljNFx1YjJlNC4gXHVjNzc0XHViNTRjLCBcdWM3NzQgXHViYWE5XHViODVkXHVjNzc0IFx1Yzc3Y1x1YWQwMFx1YzEzMVx1Yzc3NCBcdWM3ODhcdWIyOTRcdWM5YzAgXHVjNWM2XHViMjk0XHVjOWMwXHViOTdjIFx1YWQ2Y1x1ZDU1OFx1YjI5NCBcdWQ1MDRcdWI4NWNcdWFkZjhcdWI3YThcdWM3NDQgXHVjNzkxXHVjMTMxXHVkNTU4XHVjMmRjXHVjNjI0LjxcL3A+XHJcblxyXG48cD5cdWM4MDRcdWQ2NTRcdWJjODhcdWQ2MzggXHViYWE5XHViODVkXHVjNzc0IFx1Yzc3Y1x1YWQwMFx1YzEzMVx1Yzc0NCBcdWM3MjBcdWM5YzBcdWQ1NThcdWI4MjRcdWJhNzQsIFx1ZDU1YyBcdWJjODhcdWQ2MzhcdWFjMDAgXHViMmU0XHViOTc4IFx1YmM4OFx1ZDYzOFx1Yzc1OCBcdWM4MTFcdWI0NTBcdWM1YjRcdWM3NzggXHVhY2JkXHVjNmIwXHVhYzAwIFx1YzVjNlx1YzViNFx1YzU3YyBcdWQ1NWNcdWIyZTQuPFwvcD5cclxuXHJcbjxwPlx1YzYwOFx1Yjk3YyBcdWI0ZTRcdWM1YjQsIFx1YzgwNFx1ZDY1NFx1YmM4OFx1ZDYzOCBcdWJhYTlcdWI4NWRcdWM3NzQgXHVjNTQ0XHViNzk4XHVjNjQwIFx1YWMxOVx1Yzc0MCBcdWFjYmRcdWM2YjBcdWI5N2MgXHVjMGRkXHVhYzAxXHVkNTc0XHViY2Y0XHVjNzkwPFwvcD5cclxuXHJcbjx1bD5cclxuXHQ8bGk+XHVhZTM0XHVhZTA5XHVjODA0XHVkNjU0OiA5MTE8XC9saT5cclxuXHQ8bGk+XHVjMGMxXHVhZGZjOiA5NyA2MjUgOTk5PFwvbGk+XHJcblx0PGxpPlx1YzEyMFx1YzYwMTogOTEgMTIgNTQgMjY8XC9saT5cclxuPFwvdWw+XHJcblxyXG48cD5cdWM3NzQgXHVhY2JkXHVjNmIwXHVjNWQwIFx1YzEyMFx1YzYwMVx1Yzc3NFx1YzVkMFx1YWM4YyBcdWM4MDRcdWQ2NTRcdWI5N2MgXHVhYzc4IFx1YzIxOCBcdWM3ODhcdWIyOTQgXHViYzI5XHViYzk1XHVjNzc0IFx1YzVjNlx1YjJlNC4gXHVjODA0XHVkNjU0XHVhZTMwXHViOTdjIFx1YjRlNFx1YWNlMCBcdWMxMjBcdWM2MDFcdWM3NzQgXHViYzg4XHVkNjM4XHVjNzU4IFx1Y2M5OFx1Yzc0YyBcdWMxMzggXHVjNzkwXHViOWFjXHViOTdjIFx1YjIwNFx1Yjk3NFx1YjI5NCBcdWMyMWNcdWFjMDQgXHViYzE0XHViODVjIFx1YWUzNFx1YWUwOVx1YzgwNFx1ZDY1NFx1YWMwMCBcdWFjNzhcdWI5YWNcdWFlMzAgXHViNTRjXHViYjM4XHVjNzc0XHViMmU0LiBcdWI1MzBcdWI3N2NcdWMxMWMsIFx1Yzc3NCBcdWJhYTlcdWI4NWRcdWM3NDAgXHVjNzdjXHVhZDAwXHVjMTMxXHVjNzc0IFx1YzVjNlx1YjI5NCBcdWJhYTlcdWI4NWRcdWM3NzRcdWIyZTQuIDxcL3A+XHJcbiIsImlucHV0IjoiPHA+XHVjY2FiXHVjOWY4IFx1YzkwNFx1YzVkMCBcdWQxNGNcdWMyYTRcdWQyYjggXHVjZjAwXHVjNzc0XHVjMmE0XHVjNzU4IFx1YWMxY1x1YzIxOCB0XHVhYzAwIFx1YzhmY1x1YzViNFx1YzljNFx1YjJlNC4gKDEgJmxlOyB0ICZsZTsgNTApIFx1YWMwMSBcdWQxNGNcdWMyYTRcdWQyYjggXHVjZjAwXHVjNzc0XHVjMmE0XHVjNzU4IFx1Y2NhYlx1YzlmOCBcdWM5MDRcdWM1ZDBcdWIyOTQgXHVjODA0XHVkNjU0XHViYzg4XHVkNjM4XHVjNzU4IFx1YzIxOCBuXHVjNzc0IFx1YzhmY1x1YzViNFx1YzljNFx1YjJlNC4gKDEgJmxlOyBuICZsZTsgMTAwMDApIFx1YjJlNFx1Yzc0YyBuXHVhYzFjXHVjNzU4IFx1YzkwNFx1YzVkMFx1YjI5NCBcdWJhYTlcdWI4NWRcdWM1ZDAgXHVkM2VjXHVkNTY4XHViNDE4XHVjNWI0IFx1Yzc4OFx1YjI5NCBcdWM4MDRcdWQ2NTRcdWJjODhcdWQ2MzhcdWFjMDAgXHVkNTU4XHViMDk4XHVjNTI5IFx1YzhmY1x1YzViNFx1YzljNFx1YjJlNC4gXHVjODA0XHVkNjU0XHViYzg4XHVkNjM4XHVjNzU4IFx1YWUzOFx1Yzc3NFx1YjI5NCBcdWFlMzhcdWM1YjRcdWM1N2MgMTBcdWM3OTBcdWI5YWNcdWM3NzRcdWJhNzAsIFx1YmFhOVx1Yjg1ZFx1YzVkMCBcdWM3ODhcdWIyOTQgXHViNDUwIFx1YzgwNFx1ZDY1NFx1YmM4OFx1ZDYzOFx1YWMwMCBcdWFjMTlcdWM3NDAgXHVhY2JkXHVjNmIwXHViMjk0IFx1YzVjNlx1YjJlNC48XC9wPlxyXG4iLCJvdXRwdXQiOiI8cD5cdWFjMDEgXHVkMTRjXHVjMmE0XHVkMmI4IFx1Y2YwMFx1Yzc3NFx1YzJhNFx1YzVkMCBcdWIzMDBcdWQ1NzRcdWMxMWMsIFx1Yzc3Y1x1YWQwMFx1YzEzMSBcdWM3ODhcdWIyOTQgXHViYWE5XHViODVkXHVjNzc4IFx1YWNiZFx1YzZiMFx1YzVkMFx1YjI5NCBZRVMsIFx1YzU0NFx1YjJjYyBcdWFjYmRcdWM2YjBcdWM1ZDBcdWIyOTQgTk9cdWI5N2MgXHVjZDljXHViODI1XHVkNTVjXHViMmU0LjxcL3A+XHJcbiIsImhpbnQiOiIiLCJvcmlnaW5hbCI6IjAiLCJodG1sX3RpdGxlIjoiMCIsInByb2JsZW1fbGFuZ190Y29kZSI6IktvcmVhbiJ9LHsicHJvYmxlbV9pZCI6IjUwNTIiLCJwcm9ibGVtX2xhbmciOiIxIiwidGl0bGUiOiJQaG9uZSBMaXN0IiwiZGVzY3JpcHRpb24iOiI8cD5HaXZlbiBhIGxpc3Qgb2YgcGhvbmUgbnVtYmVycywgZGV0ZXJtaW5lIGlmIGl0IGlzIGNvbnNpc3RlbnQgaW4gdGhlIHNlbnNlIHRoYXQgbm8gbnVtYmVyIGlzIHRoZSBwcmVcdWZiMDF4IG9mIGFub3RoZXIuIExldCZyc3F1bztzIHNheSB0aGUgcGhvbmUgY2F0YWxvZ3VlIGxpc3RlZCB0aGVzZSBudW1iZXJzOjxcL3A+XHJcblxyXG48dWw+XHJcblx0PGxpPkVtZXJnZW5jeSA5MTE8XC9saT5cclxuXHQ8bGk+QWxpY2UgOTcgNjI1IDk5OTxcL2xpPlxyXG5cdDxsaT5Cb2IgOTEgMTIgNTQgMjY8XC9saT5cclxuPFwvdWw+XHJcblxyXG48cD5JbiB0aGlzIGNhc2UsIGl0JnJzcXVvO3Mgbm90IHBvc3NpYmxlIHRvIGNhbGwgQm9iLCBiZWNhdXNlIHRoZSBjZW50cmFsIHdvdWxkIGRpcmVjdCB5b3VyIGNhbGwgdG8gdGhlIGVtZXJnZW5jeSBsaW5lIGFzIHNvb24gYXMgeW91IGhhZCBkaWFsbGVkIHRoZSBcdWZiMDFyc3QgdGhyZWUgZGlnaXRzIG9mIEJvYiZyc3F1bztzIHBob25lIG51bWJlci4gU28gdGhpcyBsaXN0IHdvdWxkIG5vdCBiZSBjb25zaXN0ZW50LjxcL3A+XHJcbiIsImlucHV0IjoiPHA+VGhlIFx1ZmIwMXJzdCBsaW5lIG9mIGlucHV0IGdpdmVzIGEgc2luZ2xlIGludGVnZXIsIDEgJmxlOyB0ICZsZTsgNDAsIHRoZSBudW1iZXIgb2YgdGVzdCBjYXNlcy4gRWFjaCB0ZXN0IGNhc2Ugc3RhcnRzIHdpdGggbiwgdGhlIG51bWJlciBvZiBwaG9uZSBudW1iZXJzLCBvbiBhIHNlcGFyYXRlIGxpbmUsIDEgJmxlOyBuICZsZTsgMTAwMDAuIFRoZW4gZm9sbG93cyBuIGxpbmVzIHdpdGggb25lIHVuaXF1ZSBwaG9uZSBudW1iZXIgb24gZWFjaCBsaW5lLiBBIHBob25lIG51bWJlciBpcyBhIHNlcXVlbmNlIG9mIGF0IG1vc3QgdGVuIGRpZ2l0cy48XC9wPlxyXG4iLCJvdXRwdXQiOiI8cD5Gb3IgZWFjaCB0ZXN0IGNhc2UsIG91dHB1dCAmbGRxdW87WUVTJnJkcXVvOyBpZiB0aGUgbGlzdCBpcyBjb25zaXN0ZW50LCBvciAmbGRxdW87Tk8mcmRxdW87IG90aGVyd2lzZS48XC9wPlxyXG4iLCJoaW50IjoiIiwib3JpZ2luYWwiOiIxIiwiaHRtbF90aXRsZSI6IjAiLCJwcm9ibGVtX2xhbmdfdGNvZGUiOiJFbmdsaXNoIn1d</div>
</div>
